(()=>{"use strict";const e=(e,t,r)=>{let a=t,o=!1;return{name:e,length:t,piece:r,getHits:()=>a,getIsSunk:()=>o,hit:()=>{a-=1,a<=0&&(o=!0)}}},t=(t,r)=>{const a=t,o=(()=>{let t=!1,r=17;const a=[],o=[],n=(e,t,r,n=!0)=>{const{length:l,piece:s}=r;if(n){if(l+e>=10)return!1;for(let r=e;r<l+e;r+=1)if(a[t][r]&&a[t][r])return!1;for(let r=e;r<l+e;r+=1)a[t][r]=s;a[t][e+l-1]=s}else{if(l+t>=10)return!1;for(let r=t;r<t+l;r+=1)if(a[r]&&a[r][e])return!1;for(let r=t;r<t+l;r+=1)a[r]&&(a[r][e]=s);a[t+l-1][e]=s}return o.push(r),!0};return{board:a,ships:o,startingPieces:[["carrier",5,"C"],["battleship",4,"B"],["destroyer",3,"D"],["submarine",3,"S"],["patrol boat",2,"P"]],createGameboard:()=>{for(let e=0;e<10;e+=1){const e=[];for(let t=0;t<10;t+=1)e.push(null);a.push(e)}},placePiece:n,receiveAttack:(e,n)=>{const l=a[e][n];if(l){const s=o.find((e=>e.piece===l));s&&(a[e][n]="X",s.hit(),r-=1,r<=0&&(t=!0,console.log("all Sunk")))}else a[e][n]="O"},populateBoard:t=>{const r=()=>Math.floor(10*Math.random());for(let a=0;a<t.length;a+=1){const o=t[a],l=e(o[0],o[1],o[2]);let s=!1;for(;!s;){const e=Math.random()>.5,t=r(),a=r();s=n(t,a,l,e)}}},getTotalHits:()=>r,getAllSunk:()=>t,allSunk:t}})();return o.createGameboard(),o.populateBoard(o.startingPieces),console.table(o.board),{playerBoard:o,turn:e=>{r&&(e=>{const t=()=>Math.floor(10*Math.random());let r,a;do{r=t(),a=t()}while(null!==o.board[r][a]);console.log("hello"),e.receiveAttack(r,a)})(e)},playerName:a,isComputer:r,humanTurn:(e,t,r)=>{console.log("Human selected:",t,r),e.receiveAttack(t,r)}}},r=(()=>{let e,r,a,o,n=!1;const l=()=>{const e=a.playerBoard.getAllSunk();console.log(e);const t=o.playerBoard.getAllSunk();e&&(n=!0),t&&(n=!0)},s=(t,c)=>{e.isComputer?(e.turn(r.playerBoard),l(),n||(e=e===a?o:a,r=r===o?a:o,s())):e.turn(r.playerBoard,t,c)},c=e=>{const t=document.getElementById("game-container"),r=((e,t,r)=>{const a=e.board;console.table(a);const o=`\n  <h1>${t.playerName}</h1>\n  <table id="${t.playerName}-board" class="game-board">\n    ${a.map(((e,t)=>`\n      <tr>${e.map(((e,r)=>`<td data-x="${r}" data-y="${t}"><button data-x="${r}" data-y="${t}">${e||""}</button></td>`)).join("")}</tr>`)).join("")}\n  </table>\n`,n=document.createElement("div");return n.innerHTML=o,n.querySelectorAll("button").forEach((e=>{const o=parseInt(e.dataset.x),n=parseInt(e.dataset.y);e.textContent=a[n][o]||"",e.addEventListener("click",(()=>{t.isComputer||(console.log(o,n),r(t.playerBoard,o,n))}))})),n})(e.playerBoard,e,s);t.appendChild(r)};return{startGame:()=>{a=t("human",!1),o=t("computer",!0),e=a,r=o,c(a),c(o)},takeTurn:s,checkGameOver:l,boardComponent:c}})();r.startGame(),r.takeTurn()})();